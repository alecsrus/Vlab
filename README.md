# VirtualSchoolLabs (прототип)

Прототип Android‑приложения «виртуальные лаборатории по школьной программе»:
- Каталог предметов → тем → интерактивные «лабы»
- Freemium: часть тем бесплатна, часть — Premium (заглушка покупки + готовое место под Google Play Billing)
- Локальный «AI‑тьютор» **без облака**: маленькая модель TF‑IDF (поиск по базе знаний) прямо в приложении

> Это **MVP/скелет** — чтобы быстро проверить идею, UX и пайплайн сборки APK через GitHub Actions.

---

## Что уже есть в прототипе

### 1) Каталог
- Предметы: Физика, Математика, История (добавляются через `assets/catalog.json`)
- Темы с полями: класс, описание, тип лаборатории, флаг `premium`

### 2) Лаборатории (пример 3 шт.)
- **Физика**: «Маятник» (симуляция на Canvas, параметры L/g/затухание)
- **Математика**: «Квадратичная функция» (график параболы, параметры a/b/c)
- **История**: «Французская революция» (таймлайн событий) — *пример premium‑темы*

### 3) Freemium
- Экран Paywall
- Debug‑кнопка «Разблокировать Premium на этом устройстве»
- Хранилище состояния: DataStore
- Заготовка под реальную покупку через BillingClient (в папке `premium/`)

### 4) Локальный AI‑тьютор (обязательно в приложении)
Экран «AI‑тьютор» работает полностью офлайн:
- База знаний: `assets/knowledge_base.json`
- Модель: TF‑IDF (строится на устройстве при первом запуске, маленькая и быстрая)
- Ответ: выбираются наиболее релевантные документы и возвращается краткое объяснение + подсказки

---

## Быстрый старт (локально)

1. Откройте проект в Android Studio (JDK 17).
2. Синхронизируйте Gradle.
3. Запустите `app` на эмуляторе/телефоне.

---

## Сборка APK через GitHub

В репозитории уже есть workflow: `.github/workflows/build-apk.yml`.

После пуша в `main` GitHub Actions соберёт **debug APK** и **release APK** и приложит их как artifacts.
> Примечание: в прототипе release APK подписан debug-ключом, чтобы его можно было установить. Для публикации в Google Play подключите свой keystore.


---

## Как добавлять новые предметы/темы/лабы

### Добавить тему
1. Откройте `app/src/main/assets/catalog.json`
2. Добавьте новый объект в `topics`
3. Укажите `labType` (например `PENDULUM`, `QUADRATIC`, `TIMELINE`, `PLACEHOLDER`)
4. Для платной темы поставьте `"premium": true`

### Добавить новую лабораторию (новый тип)
1. Создайте новый composable в `ui/labs/`
2. Добавьте новый `LabType` в `data/Models.kt`
3. Пропишите роутинг в `ui/screens/LabHostScreen.kt`

---

## Как сделать «настоящую» локальную LLM (следующий шаг)

В этом прототипе локальный AI — TF‑IDF (очень лёгкий, всегда офлайн).

Если нужна именно генеративная LLM на устройстве:
- добавьте движок `llama.cpp`/`ggml` (JNI) или ONNX Runtime Mobile,
- модель держите **не в APK**, а скачивайте «пакетом» на первом запуске (чтобы APK не был гигантским),
- но храните и выполняйте модель **локально** (offline‑режим соблюдён).

---

## Лицензия
MIT (можете менять).
